<div class="mat-elevation-z8 small-table">
<table style="width: 100% !important;" mat-table matSort  [dataSource]="dataSource" class="mat-elevation-z8">
  <ng-container *ngFor="let col of tableCols; let i = index" [matColumnDef]="col.key">
   <!-- <th mat-header-cell *matHeaderCellDef>{{ tableCols[i]["display"] }}</th>-->
    <th mat-header-cell mat-sort-header *matHeaderCellDef>{{ col.display || (col.displayKey | translate) }}</th>
    <td mat-cell *matCellDef="let element">
      <!-- Checking if it's a normal column or column with specific config -->
      <ng-container *ngIf="!col.config; else hasConfig">
        {{ element[col.key] }}
      </ng-container>
      <!-- If this column has a config object so we will display depending
      on our setted config -->
      <ng-template #hasConfig>
        <!-- if this attribute is a boolean, we will show values from config
        object depending on his state -->
        <ng-container *ngIf="col.config.isBoolean">
          {{ showBooleanValue(element, col) }}
        </ng-container>
        <!-- if this attribute is a date, we will format it depending on format
        value in config object -->
        <ng-container *ngIf="col.config.isDate">
          {{ element[col.key] | date: col.config.format }}
        </ng-container>
        <ng-container *ngIf="col.config.isNameTemplate">
          {{ (element[col.key]?.firstname ? element[col.key]?.firstname :
          '') + ' ' +  (element[col.key]?.lastname ? element[col.key]?.lastname :
          '')}}
        </ng-container>
        <ng-container *ngIf="col.config.customRenderer">
          {{ col.config.renderCell(element) }}
        </ng-container>
        <!-- if this column is action, we will loop through each action and show it as a link -->
        <ng-container *ngIf="col.config.isAction && !col.config.isMonitor">
          <span *ngFor="let action of col.config.actions" (click)="onAction(element, action.type)">
             <a>{{ action.displayKey | translate }}</a>
          </span>
        </ng-container>

        <ng-container *ngIf="col.config.isAction && col.config.isMonitor">
          <span *ngFor="let action of col.config.actions" (click)="!element['jobId'] ? '' : onAction(element, action.type)"  >
             <a [class.disabled]="!element['jobId']">{{ action.displayKey | translate }}</a>
          </span>
        </ng-container>
      </ng-template>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="keys"></tr>
  <tr mat-row *matRowDef="let row; columns: keys"></tr>
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="10">{{ "COMMON.NoData" | translate }}</td>
  </tr>
</table>
<mat-paginator *ngIf="showPagination"
  [pageSizeOptions]="[pageSizeOptions]"
  [length]="data?.overallsize"
  [pageIndex]="data?.offset / pageSizeOptions"
  (page)="getNext($event)"
  showFirstLastButtons></mat-paginator>
</div>
