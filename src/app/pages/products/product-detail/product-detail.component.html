<mat-card>
  <mat-card-header>
    <mat-card-title>{{'PRODUCT.ProductDetail' | translate}}</mat-card-title>
  </mat-card-header>

  <mat-card-content class="outer-card"
                    *ngIf="currentProduct">
    <app-product-form
      [isLoading]="isLoading"
      [product]="currentProduct?.product"
      (submitEvent)="editProduct($event)">
      <app-upload-image imageUpload
                        [img]="uploadedImage"
                        [uploadLabel]="'PRODUCT.ImageUpload' | translate"
                        (uploadedImg)="uploadImage($event)">
      </app-upload-image>
      <div pdfUpload>
        <app-upload-pdf [pdf]="uploadedPdf[0]"
                        (uploadedPdf)="uploadPdf($event, 0)">
        </app-upload-pdf>
        <app-upload-pdf [pdf]="uploadedPdf[1]"
                        (uploadedPdf)="uploadPdf($event, 1)">
        </app-upload-pdf>
        <app-upload-pdf [pdf]="uploadedPdf[2]"
                        (uploadedPdf)="uploadPdf($event, 2)">
        </app-upload-pdf>
      </div>
      <div videoUpload>
        <app-upload-video [video]="uploadedVideo[0]"
                          [isLoading]="isLoading"
                          (uploadedVideo)="uploadVideo($event, 0)">
        </app-upload-video>
        <app-upload-video [video]="uploadedVideo[1]"
                          [isLoading]="isLoading"
                          (uploadedVideo)="uploadVideo($event, 1)">
        </app-upload-video>
        <app-upload-video [video]="uploadedVideo[2]"
                          [isLoading]="isLoading"
                          (uploadedVideo)="uploadVideo($event, 2)">
        </app-upload-video>
      </div>
      <div productUrl>
        <ng-container *ngIf="isPublished">
          {{ 'PRODUCT.LinkToCopy' | translate }}
          <strong class="product-page-link">{{ productPageLink }}</strong>
        </ng-container>
      </div>
      <div productAdditionalButtons>
        <ng-container *ngIf="isPublished">
          <div class="product-action-buttons">
            <button mat-stroked-button
                    color="primary"
                    (click)="openInNewTab(productPageLink)"
                    type="button">
              {{'PRODUCT.Preview' | translate}}
            </button>

            <button mat-stroked-button
                    *ngIf="currentProduct.product.customer?.phone_number"
                    color="primary"
                    (click)="sendProductLinkBy('sms')"
                    type="button">
              {{'PRODUCT.SendAsTextMessage' | translate}}
            </button>

            <button mat-stroked-button
                    *ngIf="currentProduct.product.customer?.email"
                    color="primary"
                    (click)="sendProductLinkBy('email')"
                    type="button">
              {{'PRODUCT.SendAsEmail' | translate}}
            </button>

            <div style="justify-content: space-between; display: flex;">
                <mat-form-field color="primary" style="width: 45%;" appearance="outline">
                    <mat-label>{{ 'PRODUCT.Date' | translate }}</mat-label>
                    <input matInput
                        autocomplete="off"
                        placeholder="{{ 'PRODUCT.ProductDateFormat' | translate }}"
                        [(ngModel)]="date"
                        (input)="handleChangeDate($event)"
                    >
                </mat-form-field>
                <mat-form-field color="primary" style="width: 45%;"  appearance="outline">
                    <mat-label>{{ 'PRODUCT.Hour' | translate }}</mat-label>
                    <mat-select  [(value)]="selectedHour">
                        <mat-option *ngFor="let hour of hourList" [value]="hour">
                            {{hour}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <button mat-stroked-button
                    *ngIf="date.length != 0 || selectedHour.length != 0"
                    color="primary"
                    (click)="sendProductLinkByWithDelay('sms')"
                    [disabled]="!validateDate(date) || date.length == 0 || selectedHour.length == 0"
                    type="button">
              {{'PRODUCT.SendAsTextMessageWithDelay' | translate}}
            </button>

            <button mat-stroked-button
                    *ngIf="date.length != 0 || selectedHour.length != 0"
                    color="primary"
                    (click)="sendProductLinkByWithDelay('email')"
                    [disabled]="!validateDate(date) || date.length == 0 || selectedHour.length == 0"
                    type="button">
              {{'PRODUCT.SendAsEmailWithDelay' | translate}}
            </button>
          </div>
        </ng-container>
      </div>

    </app-product-form>
  </mat-card-content>
</mat-card>

